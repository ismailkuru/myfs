\chapter{Введение}

Копирование при записи (Copy-On-Write, далее COW) это альтернатива
журналированию (Journaling, Write-Ahead-Logging, далее WAL). При использовании
WAL изменения перед тем как быть зафиксированы выписываются в специальное место
 - журнал. Только после того как все необходимые данные зафиксированы в
журнале, журнал будет проигран, т. е. изменения будут зафиксированы в файловой
системе. При таком подходе данные приходится выписывать на диск дважды: первый
раз при записи журнала, второй раз при проигрывании журнала, поэтому некоторые
файловые системы по-умолчанию журналируют только метаданные, но не делают этого
для данных.

В отличие от WAL, при использовании COW файловая система не перезаписывает
данные на месте, вместо этого алоцируется новое место на диске, данные
записываются в новое место после чего подменяется ссылка на данные так, чтобы
она указывала на новое место. Среди файловых систем использующих COW такие
файловые системы как WAFL~\cite{WAFL}, ZFS и Btrfs.

В этой работе рассматривается дизайн и реализация COW файловой системы
использующей в качестве основной индексной структуры данных
журнально-структурированное дерево со слиянием (Log-Strucutred Merge Tree, далее
LSM-дерево) под названием myfs~\cite{MYFS}.

Работа состоит из трех разделов. В первом разделе будут рассмотрены некоторые
достоинства использования COW вместо WAL, а также файловые системы ZFS и Btrfs
применяющие этот подход\footnote{WAFL является закрытой разработкой компании
NetApp, поэтому о ее внутреннем устройстве и современном состоянии можно судить
только по статьям, в связи с этим рассматриваться в данной работе она не
будет.}. Во втором разделе рассматривается дизайн и реализация myfs, а также
темы непосредственно связанные с реализацией. Третий и заключительный раздел
посвящен результатам тестирования и выводам по проделанной работе.

\input{intro/cow}
\input{intro/zfs}
\input{intro/btrfs}
