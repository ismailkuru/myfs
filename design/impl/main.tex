\chapter{Дизайн и реализация}

В предыдущем разделе были рассмотрены структуры данных используемые файловыми
системами ZFS и Btrfs - ZFS использует хеш-таблицы, а Btrfs B+ деревья. Этот
раздел посвящен дизайну и реализации файловой системы использующей вариацию
структуры данных известную как LSM-дерево.

Текущая реализация файловой системы находится в состоянии proof-of-concept, т.
е. многие существенные для файловой системы функции еще не реализованы:
\begin{itemize}
  \item согласно спецификации POSIX если файл был удален, пока хотя бы один из
        процессов файловой системы держит файловый дескриптор ссылающийся на
        этот файл, то файл все еще должен быть доступен этому процессу - такое
        поведение часто называют отложенным удалением, и оно не поддерживается
        в текущей реализации;
  \item другая важная функциональность файловой системы заключается в
        отслеживании свободного и занятого места на диске, однако организация
        хранения этой информации является довольно сложной задачей, которая не
        решена в текущей версии кода, т. е. файловая система может работать
        только в режиме append-only.
\end{itemize}

\input{impl/lsm}
\input{impl/fs}
\input{impl/todo}
